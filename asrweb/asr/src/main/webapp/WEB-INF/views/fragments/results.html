<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="results" th:if="${results}">
    <div class="content-section-b">
        <div th:replace="fragments/help :: help"></div>
        <div class="row">
            <div id="heading">
                <h2><span class="node-label">Root</span> <small><span class="infer-label">joint</span> reconstruction </small></h2>
                <hr class="h-divider"></hr>
            </div>
        </div>
        <div id="results" class="container-fluid" >
            <div class="row col-sm-10 col-md-10 col-lg-10 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">
                <div id="reconstructed-tree" class="well col-sm-3 col-md-3 col-lg-3">
                    <svg id="phylo">
                            <script type="text/javascript" th:inline="javascript">
                                /*<![CDATA[*/
                                    var recon = /*[[${tree}]]*/;
                                    setup_tree("#phylo", recon);
                                   /*]]>*/
                            </script>
                    </svg>
                </div>
                <div class="col-sm-9 col-md-9 col-lg-9">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span id="selected-scheme">GRASP</span> | <small>Select other colour scheme...  </small><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a id="random" onclick="update_scheme('random')">GRASP <span id="random-selected" class="glyph-selected glyphicon glyphicon-ok" aria-hidden="true"></span></a></li>
                            <li><a id="clustal" onclick="update_scheme('clustal')">Clustal <span id="clustal-selected" class="disable glyph-selected glyphicon glyphicon-ok" aria-hidden="true"></span></a></li>
                            <li><a id="lesk" onclick="update_scheme('lesk')">Lesk <span id="lesk-selected" class="disable glyph-selected glyphicon glyphicon-ok" aria-hidden="true"></span></a></li>
                            <li><a id="cinema" onclick="update_scheme('cinema')">Cinema <span id="cinema-selected" class="disable glyph-selected glyphicon glyphicon-ok" aria-hidden="true"></span></a></li>
                            <li><a id="ma" onclick="update_scheme('ma')">MAEditor <span id="ma-selected" class="disable glyph-selected glyphicon glyphicon-ok" aria-hidden="true"></span></a></li>
                        </ul>
                    </div>
                    <div id="poag" class="col-sm-12 col-md-12 col-lg-12">
                    </div>
                        <script type="text/javascript" th:inline="javascript">
                                /*<![CDATA[*/
                                    var update_scheme = function(scheme) {
                                        var glyphs = document.querySelectorAll(".glyph-selected");
                                        for (var i = 0; i < glyphs.length; i++) {
                                            if (!glyphs[i].classList.contains('disable')) {
                                                glyphs[i].classList.add('disable');
                                            }
                                        }
                                        document.querySelector("#" + scheme + "-selected").classList.remove('disable');
                                        document.getElementById("selected-scheme").textContent = document.getElementById(scheme).textContent;
                                        update_colour(scheme);
                                    }

                                        var json_str = /*[[${graph}]]*/;
                                        console.log(json_str);
                                        var options = setup_options("poag", json_str);
                                        options = create_poags(options);
                                /*]]>*/
                        </script>
                </div>
            </div>
            <div class="row col-sm-10 col-md-10 col-lg-10 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">
                <button id="download-toggle" class="btn btn-default col-sm-12 col-md-12 col-lg-12" data-target="#download-form" data-toggle="collapse">Download Results...   <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></button>
                    <div th:replace="fragments/download_form :: download_form"></div>
                    <script type="text/javascript">
                                $('#download-toggle').click( function(){
                                    $(this).find('span').toggleClass('glyphicon-menu-down').toggleClass('glyphicon-menu-up');
                                });
                    </script>
            </div>
        </div>
    </div>
</div>
</body>
</html>